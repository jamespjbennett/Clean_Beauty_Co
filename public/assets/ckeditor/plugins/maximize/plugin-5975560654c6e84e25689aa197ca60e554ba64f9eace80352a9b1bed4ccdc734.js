/**
 * @license Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.html or http://ckeditor.com/license
 */
!function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],n=["style","className"],i=0;i<n.length;i++){var o=n[i],a=e.$.elements.namedItem(o);if(a){var r=new CKEDITOR.dom.element(a);t.push([r,r.nextSibling]),r.remove()}}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&t.length>0)for(var n=t.length-1;n>=0;n--){var i=t[n][0],o=t[n][1];o?i.insertBefore(o):i.appendTo(e)}}function n(n,i){var o=e(n),a={},r=n.$;return i||(a["class"]=r.className||"",r.className=""),a.inline=r.style.cssText||"",i||(r.style.cssText="position: static; overflow: visible"),t(o),a}function i(n,i){var o=e(n),a=n.$;"class"in i&&(a.className=i["class"]),"inline"in i&&(a.style.cssText=i.inline),t(o)}function o(e){var t=CKEDITOR.instances;for(var n in t){var i=t[n];if("wysiwyg"==i.mode&&!i.readOnly){var o=i.document.getBody();o.setAttribute("contentEditable",!1),o.setAttribute("contentEditable",!0)}}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}CKEDITOR.plugins.add("maximize",{lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh",icons:"maximize",init:function(e){function t(){var t=c.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var a,r,s,l=e.lang,d=CKEDITOR.document,c=d.getWindow(),u=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var m=e.container.getChild(1),p=e.ui.space("contents");if("wysiwyg"==e.mode){var h=e.getSelection();a=h&&h.getRanges(),r=c.getScrollPosition()}else{var f=e.editable().$;a=!CKEDITOR.env.ie&&[f.selectionStart,f.selectionEnd],r=[f.scrollLeft,f.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){c.on("resize",t),s=c.getScrollPosition();for(var g=e.container;g=g.getParent();)g.setCustomData("maximize_saved_styles",n(g)),g.setStyle("z-index",e.config.baseFloatZIndex-5);p.setCustomData("maximize_saved_styles",n(p,!0)),m.setCustomData("maximize_saved_styles",n(m,!0));var v={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};d.getDocumentElement().setStyles(v),!CKEDITOR.env.gecko&&d.getDocumentElement().setStyle("position","fixed"),!(CKEDITOR.env.gecko&&CKEDITOR.env.quirks)&&d.getBody().setStyles(v),CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(0,0)},0):c.$.scrollTo(0,0),m.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),m.$.offsetLeft,m.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),m.addClass("cke_maximized"),t();var b=m.getDocumentPosition();m.setStyles({left:-1*b.x+"px",top:-1*b.y+"px"}),CKEDITOR.env.gecko&&o(e)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",t);for(var T=[p,m],E=0;E<T.length;E++)i(T[E],T[E].getCustomData("maximize_saved_styles")),T[E].removeCustomData("maximize_saved_styles");for(g=e.container;g=g.getParent();)i(g,g.getCustomData("maximize_saved_styles")),g.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(s.x,s.y)},0):c.$.scrollTo(s.x,s.y),m.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(m.setStyle("display","inline"),setTimeout(function(){m.setStyle("display","block")},0)),e.fire("resize")}this.toggleState();var C=this.uiItems[0];if(C){var y=this.state==CKEDITOR.TRISTATE_OFF?l.maximize.maximize:l.maximize.minimize,k=CKEDITOR.document.getById(C._.id);k.getChild(1).setHtml(y),k.setAttribute("title",y),k.setAttribute("href",'javascript:void("'+y+'");')}if("wysiwyg"==e.mode)if(a){CKEDITOR.env.gecko&&o(e),e.getSelection().selectRanges(a);var D=e.getSelection().getStartElement();D&&D.scrollIntoView(!0)}else c.$.scrollTo(r.x,r.y);else a&&(f.selectionStart=a[0],f.selectionEnd=a[1]),f.scrollLeft=r[0],f.scrollTop=r[1];a=r=null,u=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:l.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:u)},null,null,100)}}})}();