!function(){CodeMirror.defineExtension("autoFormatAll",function(e,t){for(var n=this,i=n.getMode(),a=n.getRange(e,t).split("\n"),o=CodeMirror.copyState(i,n.getTokenAt(e).state),r=n.getOption("tabSize"),l="",s=0,d=0==e.ch,c=0;c<a.length;++c){for(var u=new CodeMirror.StringStream(a[c],r);!u.eol();){var m=CodeMirror.innerMode(i,o),p=i.token(u,o),h=u.current();u.start=u.pos,(!d||/\S/.test(h))&&(l+=h,d=!1),!d&&m.mode.newlineAfterToken&&m.mode.newlineAfterToken(p,h,u.string.slice(u.pos)||a[c+1]||"",m.state)&&(l+="\n",d=!0,++s)}!u.pos&&i.blankLine&&i.blankLine(o),!d&&c<a.length-1&&(l+="\n",d=!0,++s)}n.operation(function(){n.replaceRange(l,e,t);for(var i=e.line+1,a=e.line+s;a>=i;++i)n.indentLine(i,"smart");n.setCursor({line:0,ch:0})})})}();