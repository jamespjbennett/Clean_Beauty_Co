!function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,i){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):";"==t&&i.lexical&&")"==i.lexical.type?!1:/^[;{}]$/.test(t)&&!/^;/.test(n)}});var e=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(t,n,i,a){var o=!1;return"html"==this.configuration&&(o=a.context?e.test(a.context.tagName):!1),!o&&("tag"==t&&/>$/.test(n)&&a.context||/^</.test(i))}}),CodeMirror.defineExtension("commentRange",function(e,t,n){var i=this,a=CodeMirror.innerMode(i.getMode(),i.getTokenAt(t).state).mode;i.operation(function(){if(e)i.replaceRange(a.commentEnd,n),i.replaceRange(a.commentStart,t),t.line==n.line&&t.ch==n.ch&&i.setCursor(t.line,t.ch+a.commentStart.length);else{var o=i.getRange(t,n),r=o.indexOf(a.commentStart),s=o.lastIndexOf(a.commentEnd);r>-1&&s>-1&&s>r&&(o=o.substr(0,r)+o.substring(r+a.commentStart.length,s)+o.substr(s+a.commentEnd.length)),i.replaceRange(o,t,n)}})}),CodeMirror.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var i=e.line;i<=t.line;i++)n.indentLine(i,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(e,t){for(var n=this,i=n.getMode(),a=n.getRange(e,t).split("\n"),o=CodeMirror.copyState(i,n.getTokenAt(e).state),r=n.getOption("tabSize"),s="",l=0,d=0==e.ch,c=0;c<a.length;++c){for(var u=new CodeMirror.StringStream(a[c],r);!u.eol();){var p=CodeMirror.innerMode(i,o),m=i.token(u,o),h=u.current();u.start=u.pos,(!d||/\S/.test(h))&&(s+=h,d=!1),!d&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(m,h,u.string.slice(u.pos)||a[c+1]||"",p.state)&&(s+="\n",d=!0,++l)}!u.pos&&i.blankLine&&i.blankLine(o),!d&&c<a.length-1&&(s+="\n",d=!0,++l)}n.operation(function(){n.replaceRange(s,e,t);for(var i=e.line+1,a=e.line+l;a>=i;++i)n.indentLine(i,"smart");n.setSelection(e,n.getCursor(!1))})})}();